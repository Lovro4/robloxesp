-- LocalScript (put in StarterPlayerScripts)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local rootPart = character:WaitForChild("HumanoidRootPart")

local bodyVelocity = Instance.new("BodyVelocity")
bodyVelocity.MaxForce = Vector3.new(1, 1, 1) * math.huge
bodyVelocity.Velocity = Vector3.zero
bodyVelocity.Parent = rootPart

local flightSpeed = 50

RunService.RenderStepped:Connect(function()
	local direction = Vector3.zero
	local camera = workspace.CurrentCamera

	if UserInputService:IsKeyDown(Enum.KeyCode.W) then
		direction += camera.CFrame.LookVector
	end
	if UserInputService:IsKeyDown(Enum.KeyCode.S) then
		direction -= camera.CFrame.LookVector
	end
	if UserInputService:IsKeyDown(Enum.KeyCode.A) then
		direction -= camera.CFrame.RightVector
	end
	if UserInputService:IsKeyDown(Enum.KeyCode.D) then
		direction += camera.CFrame.RightVector
	end
	if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
		direction += Vector3.new(0, 1, 0)
	end
	if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then
		direction -= Vector3.new(0, 1, 0)
	end

	if direction.Magnitude > 0 then
		bodyVelocity.Velocity = direction.Unit * flightSpeed
	else
		bodyVelocity.Velocity = Vector3.zero
	end
end)
